<div class="container">
  <div class="row justify-content-between">
    <div class="col-4">
      <h5> Pedido NÂ°: <%= @order.id %> </h5>
      <h5> Fecha: <%= @order.created_at.to_date.to_formatted_s(:iso8601) %> </h5>
      <h5> Cliente: <%= link_to @order.client.name, @order.client %> </h5>
      <h5> Zona: <%= link_to @order.area.name, @order.area %> </h5>
      <h5> Direccion: <%= @order.direction %> </h5>
    </div>
    <div class="col-4">
      <h5> Telefono: <%= @order.phone %> </h5>
      <h5> Referencia del telefono: <%= @order.phone_reference %> </h5>
      <h5> Observaciones: <%= @order.observations %> </h5>
    </div>
  </div>
</div>
<hr>

<table class="table table-striped">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Piezas</th>
      <th scope="col">Ancho</th>
      <th>x</th>
      <th scope="col">Alto</th>
      <th>x</th>
      <th scope="col">Largo</th>
      <th scope="col">Descripcion</th>
      <th scope="col">Detalles</th>
      <th scope="col">Procesado</th>
      <th scope="col">Entregado</th>
      <th scope="col">Facturado</th>
    </tr>
  </thead>
  <tbody>
    <% if @order.articles.present? %>
      <% @order.articles.each do |article| %>
        <tr>
          <td> <%= sprintf("%g", article.quantity) %> </td>
          <td>
            <%= sprintf("%g", article.width) %>
            <% if(article.width_cm) %>
              cm
            <% end %>
          </td>
          <td>x</td>
          <td>
            <%= sprintf("%g", article.height) %>
            <% if(article.height_cm) %>
              cm
            <% end %>
          </td>
          <!-- Long could be nil so to prevent crash -->
          <% if(!article.long.nil?) %>
            <td>x</td>
            <td>
              <%= sprintf("%g", article.long) %>
            </td>
          <% else %>
            <td></td>
            <td></td>
          <% end %>
          <td> <%= article.description %> </td>
          <td> <%= article.details %> </td>

          <td><%= check_box "article", "done", {:checked => article.done?, :disabled => true} %></td>
          <td><%= check_box "article", "delivered", {:checked => article.delivered?, :disabled => true }%></td>
          <td><%= check_box "article", "invoiced", {:checked => article.invoiced?, :disabled => true} %></td>

        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<div class="row justify-content-center">
  <% if policy(@order).edit? %>
    <%= link_to "Editar", edit_order_path(@order), class:"btn btn-primary" %>
  <% end %>
  &nbsp;
  <% if policy(@order).destroy? %>
    <%= link_to 'Eliminar', order_path(@order), class:"btn btn-danger",
        method: :delete, data: { confirm: 'Estas seguro?' } %>
  <% end %>
</div>
