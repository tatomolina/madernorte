<h4> Pedido NÂ°: <%= @order.id %> </h4>
<h5> Fecha: <%= @order.created_at.to_date.to_formatted_s(:iso8601) %> </h5>
<h5> Cliente: <%= @order.client.name %> </h5>
<hr>

<table class="table table-bordered">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Piezas</th>
      <th scope="col">Ancho</th>
      <th>x</th>
      <th scope="col">Alto</th>
      <th>x</th>
      <th scope="col">Largo</th>
      <th scope="col">Descripcion</th>
      <th scope="col">Detalles</th>
      <th scope="col">Procesado</th>
      <th scope="col">Entregado</th>
    </tr>
  </thead>
  <tbody>
    <% if @order.articles.present? %>
      <% @order.to_process.each do |article| %>
        <tr>
          <td> <%= sprintf("%g", article.quantity) %> </td>
          <td>
            <%= sprintf("%g", article.width) %>
            <% if(article.width_cm) %>
              cm
            <% end %>
          </td>
          <td>x</td>
          <td>
            <%= sprintf("%g", article.height) %>
            <% if(article.height_cm) %>
              cm
            <% end %>
          </td>
          <!-- Long could be nil so to prevent crash -->
          <% if(!article.long.nil?) %>
            <td>x</td>
            <td>
              <%= sprintf("%g", article.long) %>
            </td>
          <% else %>
            <td></td>
            <td></td>
          <% end %>
          <td> <%= article.description %> </td>
          <td> <%= article.details %> </td>

          <td><%= check_box "article", "done", {:checked => article.done?, :disabled => true} %></td>
          <td><%= check_box "article", "delivered", {:checked => article.delivered?, :disabled => true }%></td>

        </tr>
      <% end %>
    <% end %>

  </tbody>
</table>

<div class="row justify-content-center">
  <% if policy(@order).edit? %>
    <%= link_to "Editar", edit_order_path(@order), class:"btn btn-outline-primary" %>
  <% end %>
</div>
